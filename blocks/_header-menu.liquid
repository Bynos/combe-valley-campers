
{%- doc -%}
  Renders a header menu block.

  @param {string} [variant] - What version of the menu to render. Defaults to header menu.
  @param {string} [transparent] - Show a transparent menu
{%- enddoc -%}

{% liquid
  assign block_settings = block.settings
  assign animation_speed = 200
%}

{% case variant %}
  {% when 'mobile' %}
    <div
      class="header__drawer desktop:hidden"
      ref="headerDrawerContainer"
      {{ block.shopify_attributes }}
    >
      {% render 'header-drawer',
        class: 'header__drawer--mobile',
        linklist: block_settings.menu,
        data_header_drawer_type: 'mobile-drawer'
      %}
    </div>

  {% when 'navigation_bar' %}
    {% if block_settings.navigation_bar == true %}
      <div
        class="menu-list menu-list--mobile{% if transparent == blank %} color-{{ block_settings.color_scheme_navigation_bar }}{% endif %}"
        style="--menu-horizontal-gap: 15px; --mobile-nav-margin: auto;"
      >
        <div class="menu-list__scroll-container">
          <ul
            class="menu-list__list list-unstyled"
            role="list"
          >
            {% for link in block_settings.menu.links %}
              <li>
                <a
                  href="{{ link.url }}"
                  id="MenuItem-{{ link.handle }}"
                  class="menu-list__item"
                  {% if link.current %}
                    aria-current="page"
                  {% endif %}
                >
                  {{- link.title -}}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    {% endif %}
  {% else %}
    <header-menu
      ref="headerMenu"
      class="header-menu mobile:hidden"
      data-animation-delay="{{ animation_speed }}"
      {{ block.shopify_attributes }}
      style="--submenu-animation-speed: {{ animation_speed }}ms;"
    >
      <div class="header-menu__inner">
        {%- render 'header-menu' %}
      </div>

      <script
        src="{{ 'header-menu.js' | asset_url }}"
        type="module"
        fetchpriority="low"
      ></script>
    </header-menu>
{% endcase %}

{% stylesheet %}
  .menu-list--mobile {
    &.menu-list {
      display: grid;
    }

    & .menu-list__list {
      width: max-content;
      margin-inline: auto;
      gap: var(--menu-horizontal-gap);
    }

    & li {
      width: max-content;
      padding-block: var(--padding-sm);
    }

    & li:first-of-type {
      padding-inline-start: var(--menu-horizontal-gap);
    }

    & li:last-of-type {
      padding-inline-end: var(--menu-horizontal-gap);
    }

    & a {
      color: var(--color-foreground);
    }
  }

  .menu-list__scroll-container {
    position: relative;
    overflow-x: auto;
    mask-image: linear-gradient(to right, transparent, #000 20px, #000 calc(100% - 20px), transparent);
    padding-block: var(--padding-2xs);
  }

  header-menu {
    width: 100%;
  }

  /* Drawer menu featured content */
  .menu-drawer__featured-content {
    z-index: var(--layer-base);
    container-type: inline-size;
  }

  .menu-drawer__featured-content--childlist {
    z-index: var(--layer-flat);
  }

  .menu-drawer__featured-content-list {
    display: flex;
    gap: 1em;
    overflow-x: auto;
    padding-block-end: var(--padding-lg);
  }

  .menu-drawer__featured-content-list-item {
    flex: 0 0 auto;
  }

  .menu-drawer__featured-content-list-item--product {
    width: 35cqi;
  }

  .menu-drawer__featured-content-list-item--collection img.resource-card__image {
    width: 80cqi;
  }

  .menu-drawer__featured-content-list-item:first-child {
    margin-inline-start: var(--margin-xl);
  }

  .menu-drawer__featured-content-list-item:last-child {
    margin-inline-end: var(--margin-xl);
  }

  .menu-list {
    --menu-horizontal-gap: var(--gap-xl);
    --menu-vertical-gap: var(--gap-xl);

    display: flex;
  }

  .menu-list__list {
    display: flex;
    justify-content: var(--grid-area-alignment);
  }

  .menu-list__list-item {
    flex-shrink: 0;
    white-space: nowrap;
  }

  .menu-list__list-item[aria-hidden='true'] {
    visibility: hidden;
  }

  .menu-list__link {
    font-family: var(--menu-top-level-font-family);
    font-style: var(--menu-top-level-font-style);
    font-weight: var(--menu-top-level-font-weight);
    font-size: var(--menu-top-level-font-size);
    line-height: var(--menu-top-level-font-line-height);
    text-transform: var(--menu-top-level-font-case);
    color: var(--menu-top-level-font-color);
    transition: color var(--animation-speed) var(--animation-easing);
    text-decoration: none;
    display: flex;
    min-height: var(--minimum-touch-target);
    align-items: center;

    &:hover,
    &:focus {
      color: var(--menu-top-level-font-color);
    }

    @media screen and (min-width: 750px) {
      font-size: var(--menu-top-level-font-size-desktop);
    }
  }

  /*
      High specificity selectors to subdue non-hovered links without javascript.
      If the need for js-generated `hovered` and `focused` classes arises for another reason we can simplify these.
    */
  .menu-list:where(:has(.menu-list__list-item:hover)),
  .menu-list:where(:has(.menu-list__list-item:focus-within)),
  .menu-list:where(:has(.menu-list__list-item:not([aria-hidden='true']) .menu-list__link--active)) {
    .menu-list__link {
      color: rgb(var(--menu-top-level-font-color-rgb) / var(--opacity-subdued-text));
    }
  }

  /* stylelint-disable-next-line selector-max-specificity */
  .menu-list:not(:has(.menu-list__list-item:hover)) .menu-list__link--active,
  .menu-list .menu-list__list-item:where(:hover, :focus-within) .menu-list__link,
  .menu-list .menu-list__list-item[slot='overflow'] .menu-list__link[aria-expanded='true'] {
    color: var(--menu-top-level-font-color);
  }

  .overflow-menu::part(list) {
    /* Make sure focus outline is not cut off by overflow hidden */
    --focus-outline-size: calc(var(--focus-outline-offset) + var(--focus-outline-width));

    gap: 0 var(--menu-horizontal-gap);
  }

  .overflow-menu {
    background-color: transparent;
    padding: var(--focus-outline-size);
    margin: calc(-1 * var(--focus-outline-size));
  }

  /* the submenu background element to animate */
  .overflow-menu::after {
    content: '';
    position: absolute;
    top: calc(100% - 1px + var(--border-bottom-width));
    left: 0;
    width: 100%;
    height: var(--submenu-height);
    background-color: var(--color-background);
    box-shadow: var(--shadow-popover);
    clip-path: inset(0.5px 0 -100px 0); /* stylelint-disable-line */
    opacity: var(--submenu-opacity, 1);
    transition: height var(--submenu-animation-speed) var(--ease-out-cubic),
      opacity var(--animation-speed-slow) var(--ease-out-cubic) var(--animation-speed-fast);
    z-index: calc(var(--layer-header-menu) - 1);
  }

  /** mega menu **/
  .menu-list__submenu,
  .overflow-menu::part(overflow) {
    --submenu-padding-block-start: var(--padding-3xl);
    --submenu-padding-block-end: var(--padding-3xl);

    background-color: transparent;
  }

  .header__row[style*='--border-bottom-width: 0px'] {
    .menu-list__submenu.color-scheme-matches-parent,
    .overflow-menu.color-scheme-matches-parent::part(overflow) {
      --submenu-padding-block-start: 0px;
    }
  }

  .menu-list__list-item:where(:not([slot='overflow'])) > .menu-list__submenu,
  .overflow-menu::part(overflow) {
    --submenu-content-opacity: 0;
    --submenu-content-animation: opacity calc(var(--submenu-animation-speed) * 0.75) var(--animation-easing);

    box-shadow: var(--shadow-drawer);
    visibility: hidden;
    background-color: var(--color-background);
    position: absolute;
    width: 100%;
    left: 0;
    top: calc(100% - 1px + var(--border-bottom-width));
    z-index: var(--layer-header-menu);
    padding-inline: var(--padding-inline);
    clip-path: rect(0 100% var(--submenu-height) 0); /* stylelint-disable-line */
    transition: clip-path var(--submenu-animation-speed) var(--ease-out-cubic);
  }

  /* Show the submenus on hover */
  .menu-list__list-item:has([aria-expanded='true']) > .menu-list__submenu,
  /* Show the overflow menu when a menu item is hovered */
  .overflow-menu:has([slot="overflow"] [aria-expanded='true'])::part(overflow),
  /* Keep the submenus open when they are hovered */
  .menu-list__submenu:is(:hover),
  .overflow-menu::part(overflow):hover {
    --submenu-content-opacity: 1;

    visibility: visible;
  }

  .menu-list__list-item:has([data-animating]) > .menu-list__submenu {
    --submenu-content-opacity: 0;

    visibility: visible;

    &::before {
      height: 0;
    }
  }

  .menu-list__submenu-inner,
  .overflow-menu::part(overflow-list) {
    grid-column: 2;
    padding-block-start: var(--submenu-padding-block-start);
    padding-block-end: var(--submenu-padding-block-end);
    padding-inline: var(--section-padding-inline);
  }

  .overflow-menu::part(overflow) {
    --menu-top-level-font-size: var(--font-size--xlarge);

    display: grid;
    grid-template-columns: var(--full-page-grid-with-margins);
  }

  .overflow-menu::part(overflow-list) {
    --submenu-content-opacity: 0;

    position: relative;
    display: grid;
    grid-template-columns: minmax(auto, 200px) 1fr;
    grid-template-areas: 'left right';
    grid-template-rows: max-content;
    grid-gap: 0;
  }

  /* Make overflow menu scrollable when content exceeds viewport */
  .menu-list__submenu-inner,
  .overflow-menu::part(overflow-list) {
    max-height: calc(80vh - var(--header-height));
    overflow-y: auto;
    overflow-x: hidden;

    scrollbar-width: thin;
    scrollbar-color: rgb(var(--color-foreground-rgb) / var(--opacity-40)) transparent;
  }

  .menu-list__list-item:is([slot='overflow']) {
    --menu-top-level-font-color: var(--color-foreground);
    --menu-top-level-font-color-rgb: var(--color-foreground-rgb);

    display: contents;
    white-space: normal;

    .menu-list__link {
      --submenu-content-opacity: 0;

      grid-area: left;
      grid-row: auto;
      height: min-content;
      font-size: var(--font-size--xl);
      opacity: var(--submenu-content-opacity);
      transition: var(--submenu-content-animation);
    }

    .menu-list__submenu {
      visibility: hidden;
      grid-row: 1;
      grid-area: right;
      grid-row-end: span calc(var(--overflow-count) + 1);
      padding-inline-start: var(--menu-horizontal-gap);

      .menu-list__submenu-inner {
        padding-block-start: 0;
        grid-column: unset;
      }
    }

    .menu-list__link[aria-expanded='true'] + .menu-list__submenu {
      visibility: visible;
    }
  }

  .header-menu[data-overflow-expanded='true'] .menu-list__list-item:where([slot='overflow']) .menu-list__link {
    --submenu-content-opacity: 1;
  }

  .menu-list__list-item:where([slot='overflow']):has([data-animating]) > .menu-list__link {
    --submenu-content-opacity: 0;
  }

  .menu-list__submenu-inner {
    position: relative;
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    opacity: var(--submenu-content-opacity);
    transition: var(--submenu-content-animation);
  }

  .mega-menu__link {
    font-family: var(--menu-child-font-family);
    font-style: var(--menu-child-font-style);
    font-weight: normal !important;
    font-size: 1rem !important;
    line-height: var(--menu-child-font-line-height);
    text-transform: var(--menu-child-font-case);
    color: #6a6a6a !important;
    background-color: transparent !important;
    white-space: normal;
    text-decoration: none;
    display: inline-flex;
    padding: 4px 8px !important;
    margin: 0 !important;
    border: none !important;
    transition: color var(--animation-speed) var(--animation-easing), background-color var(--animation-speed) var(--animation-easing), transform var(--animation-speed) var(--animation-easing);

    &:hover,
    &:focus {
      color: var(--cvc-green) !important;
      background-color: color-mix(in oklab, var(--cvc-yellow) 10%, transparent 90%) !important;
      transform: translateX(4px);
    }
  }

  .mega-menu__link--parent {
    font-family: var(--menu-parent-font-family);
    font-style: var(--menu-parent-font-style);
    font-weight: normal !important;
    font-size: 1rem !important;
    line-height: var(--menu-parent-font-line-height);
    text-transform: var(--menu-parent-font-case);
    color: #6a6a6a !important;
    background-color: transparent !important;
    padding: 4px 8px !important;
    margin: 0 !important;
    border: none !important;
    transition: color var(--animation-speed) var(--animation-easing), background-color var(--animation-speed) var(--animation-easing), transform var(--animation-speed) var(--animation-easing);

    &:hover,
    &:focus {
      color: var(--cvc-green) !important;
      background-color: color-mix(in oklab, var(--cvc-yellow) 10%, transparent 90%) !important;
      transform: translateX(4px);
    }
  }

  /* Additional specific selectors to ensure grey styling is applied */
  .mega-menu__grid .mega-menu__link,
  .mega-menu__list .mega-menu__link,
  .mega-menu__column .mega-menu__link {
    color: #6a6a6a !important;
    background-color: transparent !important;
    padding: 4px 8px !important;
    margin: 0 !important;
    border: none !important;
    transition: color var(--animation-speed) var(--animation-easing), background-color var(--animation-speed) var(--animation-easing), transform var(--animation-speed) var(--animation-easing);
  }

  .mega-menu__grid .mega-menu__link:hover,
  .mega-menu__grid .mega-menu__link:focus,
  .mega-menu__list .mega-menu__link:hover,
  .mega-menu__list .mega-menu__link:focus,
  .mega-menu__column .mega-menu__link:hover,
  .mega-menu__column .mega-menu__link:focus {
    color: var(--cvc-green) !important;
    background-color: color-mix(in oklab, var(--cvc-yellow) 10%, transparent 90%) !important;
    transform: translateX(4px);
  }

  .mega-menu__grid .mega-menu__link--parent,
  .mega-menu__list .mega-menu__link--parent,
  .mega-menu__column .mega-menu__link--parent {
    color: #6a6a6a !important;
    background-color: transparent !important;
    padding: 4px 8px !important;
    margin: 0 !important;
    border: none !important;
    transition: color var(--animation-speed) var(--animation-easing), background-color var(--animation-speed) var(--animation-easing), transform var(--animation-speed) var(--animation-easing);
  }

  .mega-menu__grid .mega-menu__link--parent:hover,
  .mega-menu__grid .mega-menu__link--parent:focus,
  .mega-menu__list .mega-menu__link--parent:hover,
  .mega-menu__list .mega-menu__link--parent:focus,
  .mega-menu__column .mega-menu__link--parent:hover,
  .mega-menu__column .mega-menu__link--parent:focus {
    color: var(--cvc-green) !important;
    background-color: color-mix(in oklab, var(--cvc-yellow) 10%, transparent 90%) !important;
    transform: translateX(4px);
  }

  /* Override specific CVC van model link styles */
  .cvc-van-model-link--text.active,
  .mega-menu .cvc-van-model-link--text.active,
  .mega-menu__grid .cvc-van-model-link--text.active,
  .mega-menu__list .cvc-van-model-link--text.active,
  .mega-menu__column .cvc-van-model-link--text.active {
    color: #6a6a6a !important;
    background-color: transparent !important;
    padding: 4px 8px !important;
    margin: 0 !important;
    border: none !important;
    font-weight: normal !important;
    font-size: 1rem !important;
    transition: color var(--animation-speed) var(--animation-easing), background-color var(--animation-speed) var(--animation-easing), transform var(--animation-speed) var(--animation-easing);
  }

  .cvc-van-model-link--text.active:hover,
  .cvc-van-model-link--text.active:focus,
  .mega-menu .cvc-van-model-link--text.active:hover,
  .mega-menu .cvc-van-model-link--text.active:focus,
  .mega-menu__grid .cvc-van-model-link--text.active:hover,
  .mega-menu__grid .cvc-van-model-link--text.active:focus,
  .mega-menu__list .cvc-van-model-link--text.active:hover,
  .mega-menu__list .cvc-van-model-link--text.active:focus,
  .mega-menu__column .cvc-van-model-link--text.active:hover,
  .mega-menu__column .cvc-van-model-link--text.active:focus {
    color: var(--cvc-green) !important;
    background-color: color-mix(in oklab, var(--cvc-yellow) 10%, transparent 90%) !important;
    padding: 4px 8px !important;
    margin: 0 !important;
    border: none !important;
    transform: translateX(4px);
  }

  /* Apply same styling to Conversion Guides megamenu links - target all links in ALL megamenus */
  .mega-menu__grid a,
  .mega-menu__list a,
  .mega-menu__column a,
  .mega-menu a,
  .menu-list__submenu a,
  .menu-list__submenu-inner a {
    color: #6a6a6a !important;
    background-color: transparent !important;
    padding: 4px 8px !important;
    margin: 0 !important;
    border: none !important;
    text-decoration: none !important;
    display: inline-flex;
    transition: color var(--animation-speed) var(--animation-easing), background-color var(--animation-speed) var(--animation-easing), transform var(--animation-speed) var(--animation-easing);
  }

  .mega-menu__grid a:hover,
  .mega-menu__grid a:focus,
  .mega-menu__list a:hover,
  .mega-menu__list a:focus,
  .mega-menu__column a:hover,
  .mega-menu__column a:focus,
  .mega-menu a:hover,
  .mega-menu a:focus,
  .menu-list__submenu a:hover,
  .menu-list__submenu a:focus,
  .menu-list__submenu-inner a:hover,
  .menu-list__submenu-inner a:focus {
    color: var(--cvc-green) !important;
    background-color: color-mix(in oklab, var(--cvc-yellow) 10%, transparent 90%) !important;
    transform: translateX(4px);
  }

  @media screen and (max-width: 989px) {
    .mega-menu__content-list-item--hidden-tablet {
      display: none;
    }
  }

  .mega-menu__link:has(.mega-menu__link-image) {
    display: flex;
    flex-direction: column;
    padding: 0;
    margin: 0;
    border: none;
  }

  .mega-menu__link-image {
    width: 100%;
    position: relative;
    aspect-ratio: 16 / 9;
    margin: 0;
    object-fit: cover;
    border-radius: var(--menu-image-border-radius);
  }

  /* Fix alignment for collection image mode links without images */

  /* Target only top-level links (direct children of column > div) in collection image mode */
  .mega-menu__grid:has(.mega-menu__link-image)
    .mega-menu__column
    > div
    > .mega-menu__link:not(:has(.mega-menu__link-image)) {
    display: flex;
    flex-direction: column;
    padding: 0;
    margin: 0;
    border: none;
  }

  .mega-menu__grid:has(.mega-menu__link-image)
    .mega-menu__column
    > div
    > .mega-menu__link:not(:has(.mega-menu__link-image))::before {
    content: '';
    display: block;
    width: 100%;
    aspect-ratio: 16 / 9;
    margin: 0;
    background-color: var(--color-foreground-muted);
    opacity: 0.1;
    border-radius: var(--menu-image-border-radius);
  }

  .mega-menu__grid {
    display: grid;
    grid-template-columns: repeat(var(--menu-columns-tablet), minmax(0, 1fr));
    gap: 0;
    width: 100%;

    @media screen and (min-width: 990px) {
      grid-template-columns: repeat(var(--menu-columns-desktop), minmax(0, 1fr));
    }
  }

  .mega-menu__column {
    grid-column: span 1;
  }

  .mega-menu__column--span-2 {
    grid-column: span 2;
  }

  .mega-menu__column--span-3 {
    grid-column: span 3;
  }

  .mega-menu__column--span-4 {
    grid-column: span 4;
  }

  .mega-menu__column--wide-collection-image {
    grid-column: span 1;

    @media screen and (min-width: 990px) {
      grid-column: span 2;
    }
  }

  .mega-menu__submenu .mega-menu__column--wide-collection-image {
    grid-column: span 1;
  }

  .mega-menu__content-list {
    display: grid;
    justify-content: end;
    gap: 0;
  }

  .mega-menu__content-list--products {
    grid-template-columns: repeat(var(--menu-content-columns-tablet), minmax(0, 1fr));

    @media screen and (min-width: 990px) {
      grid-template-columns: repeat(var(--menu-content-columns-desktop), minmax(0, 1fr));
    }
  }

  .mega-menu__content-list--collections {
    grid-template-columns: repeat(var(--menu-content-columns-tablet), minmax(0, 300px));

    @media screen and (min-width: 990px) {
      grid-template-columns: repeat(var(--menu-content-columns-desktop), minmax(0, 300px));
    }
  }

  .mega-menu__list {
    display: grid;
    grid-template-columns: subgrid;
    grid-column: span var(--menu-columns-tablet);
    gap: 0;

    @media screen and (min-width: 990px) {
      grid-column: span var(--menu-columns-desktop);
    }
  }

  .mega-menu__content {
    grid-column: span var(--menu-content-columns-tablet) / -1;

    @media screen and (min-width: 990px) {
      grid-column: span var(--menu-content-columns-desktop) / -1;
    }
  }

  .menu-list__list-item[slot='overflow'] .section {
    grid-template-columns: 1fr;
  }

  .menu-list__list-item[slot='overflow'] .section .mega-menu__grid {
    grid-column: 1;
  }

  .mega-menu__content-list li {
    white-space: normal;
  }

  /* mega more menu */
  .mega-menu__more-list {
    --menu-child-font-size: var(--font-size--xl);

    width: 200px;
  }

  .mega-menu__more-list-item .mega-menu__link {
    color: rgb(var(--menu-top-level-font-color-rgb) / var(--opacity-subdued-text));
  }

  .mega-menu__more-list-item:where(:hover, .active) .mega-menu__link {
    color: var(--menu-top-level-font-color);
  }

  .mega-menu__more-list-item[aria-hidden='true'] {
    display: none;
  }

  .mega-menu__submenu {
    /* preserves the inherited grid layout when this submenu wrapper is used */
    display: contents;
  }

  /* CVC Megamenu Specific Styles */
  .cvc-megamenu {
    background-color: var(--color-background);
    padding: var(--padding-3xl) var(--padding-inline);
    width: 100%;
  }

  .cvc-megamenu__container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .cvc-megamenu__title {
    font-family: var(--menu-parent-font-family);
    font-size: var(--font-size--xl);
    font-weight: var(--menu-parent-font-weight);
    color: var(--color-foreground);
    margin-bottom: var(--margin-lg);
    text-align: center;
  }

  .cvc-megamenu__content {
    display: flex;
    gap: var(--gap-xl);
  }

  .cvc-megamenu__content--centered {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .cvc-megamenu__content--two-column {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--gap-3xl);
  }

  .cvc-megamenu__images {
    display: flex;
    flex-wrap: wrap;
    gap: var(--gap-lg);
    justify-content: flex-start;
  }

  .cvc-megamenu__text-links {
    display: flex;
    flex-direction: column;
    gap: var(--gap-sm);
  }

  .cvc-van-model-link {
    display: inline-flex;
    align-items: center;
    gap: var(--gap-sm);
    padding: 8px 12px;
    border-radius: 4px;
    text-decoration: none;
    transition: all var(--animation-speed) var(--animation-easing);
    font-family: var(--menu-child-font-family);
    font-size: var(--menu-child-font-size);
    font-weight: var(--menu-child-font-weight);
  }

  .cvc-van-model-link--image {
    flex-direction: column;
    text-align: center;
    padding: var(--padding-md);
    background-color: transparent;
    border: 1px solid transparent;
    color: var(--color-foreground);
  }

  .cvc-van-model-link--image:hover,
  .cvc-van-model-link--image:focus {
    background-color: color-mix(in oklab, var(--cvc-green) 10%, transparent 90%);
    border-color: var(--cvc-green);
    transform: translateY(-2px);
  }

  .cvc-van-model-link--image img {
    width: 80px;
    height: 60px;
    object-fit: cover;
    border-radius: 4px;
    margin-bottom: var(--margin-xs);
  }

  .cvc-van-model-link--text {
    color: #6a6a6a;
    background-color: transparent;
    padding: 8px 12px;
    border: none;
  }

  .cvc-van-model-link--text:hover,
  .cvc-van-model-link--text:focus {
    color: var(--cvc-green) !important;
    background-color: color-mix(in oklab, var(--cvc-yellow) 10%, transparent 90%);
    transform: translateX(4px);
  }

  .cvc-van-model-link--text.active {
    color: var(--cvc-green) !important;
    background-color: color-mix(in oklab, var(--cvc-green) 10%, transparent 90%);
    font-weight: normal !important;
    font-size: 1rem !important;
  }

  .cvc-van-model-link__placeholder {
    width: 80px;
    height: 60px;
    background-color: var(--color-foreground-muted);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size--xs);
    color: var(--color-foreground);
    margin-bottom: var(--margin-xs);
  }

  .cvc-van-model-link__label {
    font-size: var(--font-size--sm);
    font-weight: 500;
  }

  /* CVC Conversion Guides Megamenu Styles */
  .cvc-megamenu--conversion-guides .cvc-megamenu__title {
    margin-bottom: 0.5rem;
  }

  .cvc-megamenu--conversion-guides .cvc-megamenu__description {
    text-align: center;
    margin-top: 0.5rem;
    margin-bottom: 1rem;
  }

  /* Phases grid layout - applies to all megamenus using this structure */
  .cvc-megamenu__phases {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--gap-xl);
    margin-top: var(--margin-lg);
  }

  /* Phase column title styling */
  .cvc-phase-column__title {
    font-family: var(--menu-parent-font-family);
    font-size: var(--font-size--lg);
    font-weight: var(--menu-parent-font-weight);
    color: var(--cvc-green);
    margin-bottom: var(--margin-md);
    padding-bottom: var(--padding-xs);
    border-bottom: 2px solid var(--cvc-yellow);
  }

  /* Style the title link itself */
  .cvc-phase-column__title a {
    color: var(--cvc-green);
    text-decoration: none;
    transition: color var(--animation-speed) var(--animation-easing);
  }

  .cvc-phase-column__title a:hover,
  .cvc-phase-column__title a:focus {
    color: var(--cvc-yellow);
  }

  .cvc-phase-column__links {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--gap-xs);
  }

  .cvc-phase-column__links li {
    margin: 0;
  }

  .cvc-phase-column__links a {
    display: inline-flex;
    align-items: center;
    color: #6a6a6a !important;
    background-color: transparent !important;
    padding: 4px 8px !important;
    margin: 0 !important;
    border: none !important;
    text-decoration: none !important;
    font-family: var(--menu-child-font-family);
    font-size: 1.1rem;
    font-weight: var(--menu-child-font-weight);
    line-height: var(--menu-child-font-line-height);
    transition: color var(--animation-speed) var(--animation-easing), background-color var(--animation-speed) var(--animation-easing), transform var(--animation-speed) var(--animation-easing);
  }

  .cvc-phase-column__links a:hover,
  .cvc-phase-column__links a:focus {
    color: var(--cvc-green) !important;
    background-color: color-mix(in oklab, var(--cvc-yellow) 10%, transparent 90%) !important;
    transform: translateX(4px);
    text-decoration: none !important;
  }

  /* Responsive Design for CVC Megamenus */
  @media screen and (max-width: 1024px) {
    .cvc-megamenu__phases {
      grid-template-columns: repeat(2, 1fr);
      gap: var(--gap-lg);
    }
  }

  @media screen and (max-width: 768px) {
    .cvc-megamenu__content--two-column {
      grid-template-columns: 1fr;
      gap: var(--gap-xl);
    }

    .cvc-megamenu__images {
      justify-content: center;
    }

    .cvc-start-build__features {
      grid-template-columns: 1fr;
    }

    .cvc-megamenu__phases {
      grid-template-columns: 1fr;
      gap: var(--gap-md);
    }
  }

  @media screen and (max-width: 480px) {
    .cvc-megamenu__phases {
      grid-template-columns: 1fr;
      gap: var(--gap-md);
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:names.menu",
  "tag": null,
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:settings.menu",
      "default": "main-menu"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "primary"
    },
    {
      "type": "header",
      "content": "t:content.typography"
    },
    {
      "type": "select",
      "id": "type_font_primary_size",
      "label": "t:settings.top_level_size",
      "options": [
        {
          "value": "0.625rem",
          "label": "10px"
        },
        {
          "value": "0.75rem",
          "label": "12px"
        },
        {
          "value": "0.875rem",
          "label": "14px"
        },
        {
          "value": "1rem",
          "label": "16px"
        },
        {
          "value": "1.125rem",
          "label": "18px"
        }
      ],
      "default": "1rem"
    },
    {
      "type": "select",
      "id": "menu_font_style",
      "label": "t:settings.submenu_text_style",
      "options": [
        {
          "value": "regular",
          "label": "t:options.small"
        },
        {
          "value": "inverse",
          "label": "t:options.medium"
        },
        {
          "value": "inverse_large",
          "label": "t:options.large"
        }
      ],
      "default": "inverse"
    },
    {
      "type": "select",
      "id": "type_font_primary_link",
      "label": "t:settings.font",
      "options": [
        {
          "value": "body",
          "label": "t:options.body"
        },
        {
          "value": "subheading",
          "label": "t:options.subheading"
        },
        {
          "value": "heading",
          "label": "t:options.heading"
        },
        {
          "value": "accent",
          "label": "t:options.accent"
        }
      ],
      "default": "heading"
    },
    {
      "type": "select",
      "id": "type_case_primary_link",
      "label": "t:settings.text_case",
      "options": [
        {
          "value": "none",
          "label": "t:options.default"
        },
        {
          "value": "uppercase",
          "label": "t:options.uppercase"
        }
      ],
      "default": "none"
    },
    {
      "type": "header",
      "content": "t:content.submenu_feature"
    },
    {
      "type": "select",
      "id": "menu_style",
      "label": "t:settings.media_type",
      "info": "t:info.media_type_info",
      "options": [
        {
          "value": "text",
          "label": "t:options.none"
        },
        {
          "value": "collection_images",
          "label": "t:options.collection_images"
        },
        {
          "value": "featured_products",
          "label": "t:options.featured_products"
        },
        {
          "value": "featured_collections",
          "label": "t:options.featured_collections"
        }
      ],
      "default": "collection_images"
    },
    {
      "type": "select",
      "id": "featured_products_aspect_ratio",
      "label": "t:settings.image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:options.auto"
        },
        {
          "value": "4 / 5",
          "label": "t:options.portrait"
        },
        {
          "value": "1 / 1",
          "label": "t:options.square"
        }
      ],
      "default": "4 / 5",
      "visible_if": "{{ block.settings.menu_style == 'featured_products' }}"
    },
    {
      "type": "select",
      "id": "featured_collections_aspect_ratio",
      "label": "t:settings.image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:options.auto"
        },
        {
          "value": "16 / 9",
          "label": "t:options.landscape"
        },
        {
          "value": "1 / 1",
          "label": "t:options.square"
        }
      ],
      "default": "16 / 9",
      "visible_if": "{{ block.settings.menu_style == 'featured_collections' }}"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "label": "t:settings.image_border_radius",
      "min": 0,
      "max": 32,
      "step": 1,
      "unit": "px",
      "default": 0,
      "visible_if": "{{ block.settings.menu_style != 'text' }}"
    },
    {
      "type": "header",
      "content": "t:content.mobile_layout"
    },
    {
      "type": "checkbox",
      "id": "navigation_bar",
      "label": "t:settings.navigation_bar"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme_navigation_bar",
      "label": "t:settings.navigation_bar_color_scheme",
      "default": "primary",
      "visible_if": "{{ block.settings.navigation_bar }}"
    },
    {
      "type": "checkbox",
      "id": "drawer_accordion",
      "label": "t:settings.accordion",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "drawer_accordion_expand_first",
      "label": "t:settings.expand_first_group",
      "default": false,
      "visible_if": "{{ block.settings.drawer_accordion == true }}"
    },
    {
      "type": "checkbox",
      "id": "drawer_dividers",
      "label": "t:settings.dividers",
      "default": false
    }
  ]
}
{% endschema %}
